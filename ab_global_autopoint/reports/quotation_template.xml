<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_quotation_document">
        <t t-call="ab_global_autopoint.external_layout_quotation">
            <div class="page">
                <!--            <div class="oe_structure"/>-->
                <div class="row">
                    <h1 align="center">
                        <span t-if="doc.state not in ['draft','sent']">Quotation</span>
                        <span t-if="doc.state in ['draft','sent']">Quotation</span>
                    </h1>
                    <style>
                        .table {
                        width: 100%;
                        margin-bottom: 1rem;
                        color: #212529;
                        border-collapse: collapse;
                        font-size: 12px;
                        }

                        .table-bordered {
                        border: 1px solid #dee2e6;
                        }

                        .table-bordered th,
                        .table-bordered td {
                        border: 1px solid #dee2e6;
                        padding: 5px;
                        <!--                        vertical-align: top;-->
                        <!--                        text-align: left;-->
                        }

                        .table-condensed th,
                        .table-condensed td {
                        padding: 5px;
                        }

                        h2 {
                        margin-bottom: 5px;
                        font-size:14px;
                        }

                        h3 {
                        margin-top: 5px;
                        font-size: 12px;
                        }

                    </style>
                    <div class="row">
                        <div class="col-lg-12" style="font-size:12px; display:grid;">
                            <!--                            <div class="row">-->
                            <div style="float: left;width: 40%; margin-left:5%; margin-right:5%;">
                                <table class="table table-bordered table-condensed">
                                    <!--                                       style="font-size:12px; border-collapse:collapse; width:50%; padding:15px;">-->
                                    <tr>
                                        <td width="30%" style="text-transform:uppercase; ">
                                            <b style="text-transform:capitalize;">Customer Name:</b>
                                            <t t-esc="doc.partner_id.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Address :</b>
                                            <t t-esc="doc.partner_id.street"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Kind Attn.</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Phone No.</b>
                                            <t t-esc="doc.partner_id.mobile"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Date:</b>
<!--                                            <t t-esc="doc.get_nepali_date(doc.date_order)"/>-->
                                            <!--                                    <t t-esc="doc.date_order"/>-->
                                            <span t-field="doc.date_order"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div style="float: left;width: 40%; margin-left:5%; margin-right:5%;">
                                <table class="table table-bordered table-condensed">
                                    <!--                                       style="font-size:12px; border-collapse:collapse; width:50%; padding: 15px">-->
                                    <tr>
                                        <td width="30%">
                                            <b>Q. No:</b>
                                            <t t-esc="doc.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Vehicle No:</b>
                                            <t t-esc="doc.vehicle_num.vehicle_no"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Make:</b>
                                            <t t-esc="doc.vehicle_num.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>Model No:</b>
                                            <t t-esc="doc.vehicle_num.model_no"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%">
                                            <b>VIN:</b>
                                            <t t-esc="doc.vehicle_num.chasis_no"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!--                        </div>-->
                    </div>
                    <div style="margin-top: 20px;"/>
                    <div style="margin-top: 20px;"/>
                    <div class="row">
                        <table class="table table-bordered table-condensed">
                            <!--                               style="font-size:12px; border-collapse: collapse; padding:15px;">-->
                            <tr>
                                <td width="2%">
                                    <b>S.N</b>
                                </td>
                                <td width="20%">
                                    <b>Parts No.</b>
                                </td>
                                <td width="20%">
                                    <b>Description</b>
                                </td>
                                <td width="8%">
                                    <b>QTY.</b>
                                </td>
                                <td width="8%">
                                    <b>UoM</b>
                                </td>
                                <td width="10%" align="center">
                                    <b>Unit Price</b>
                                </td>
                                <td width="10%" align="center">
                                    <b>Amount</b>
                                </td>
                            </tr>
                            <tr t-foreach="doc.order_line" t-as="l">
                                <td>
                                    <t t-esc="l_index+1"/>
                                </td>
                                <td>
                                    <t t-esc="l.product_id.product_tmpl_id.name"/>
                                </td>

                                <td t-if="l.product_id.type == 'service'">
                                    <span t-esc="l.name"/>
                                </td>
                                <td t-if="l.product_id.type == 'product'"/>
                                <td>
                                    <t t-if="l.product_id.type == 'product'">
                                        <span t-esc="'%.2f' %l.product_uom_qty"/>
                                    </t>
                                    <t t-if="l.product_id.type == 'service'">
                                        <!-- Leave qty field empty for services -->
                                    </t>

                                </td>

                                <td>
                                    <t t-if="l.product_id.type == 'service'">
                                        <!-- Leave UoM field empty for services -->
                                    </t>
                                    <t t-if="l.product_id.type == 'product'">
                                        <t t-esc="l.product_uom.name"/>
                                    </t>
                                </td>

                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(l.price_unit)"/>
                                    <span t-field="doc.currency_id.symbol"/>

                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(l.dumy_subtotal)"/>
                                    <span t-field="doc.currency_id.symbol"/>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="6" align="right">
                                    <b>Sub Total</b>
                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount_untaxed + doc.amount_discount)"/>
                                    <span t-field="doc.currency_id.symbol"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" align="right">
                                    <b>Discount</b>
                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount_discount)"/>
                                    <span t-field="doc.currency_id.symbol"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" align="right">
                                    <b>Taxable Amount</b>
                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount_untaxed)"/>
                                    <span t-field="doc.currency_id.symbol"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" align="right">
                                    <b>13 % VAT</b>
                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount_tax)"/>
                                    <span t-field="doc.currency_id.symbol"/>


                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" align="right">
                                    <b>GRAND TOTAL</b>
                                </td>
                                <td align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount_total)"/>
                                    <span t-field="doc.currency_id.symbol"/>


                                </td>
                            </tr>
                        </table>
                    </div>
                    <!--//Display the logo of the toyota parts, service and motor oil-->
                    <div>
                        <div class="col-xs-4" style="float: left;width: 30%; margin-left:10%;">
                            <img t-if="doc.company_id.image_field_1"
                                 t-att-src="image_data_uri(doc.company_id.image_field_1)"
                                 style="max-height:50px;max-width:120%" alt="Company Logo"/>

                        </div>

                        <div class="col-xs-4" style="float: left;width: 30%; ">
                            <img t-if="doc.company_id.image_field_2"
                                 t-att-src="image_data_uri(doc.company_id.image_field_2)"
                                 style="max-height:50px;max-width:120%" alt="Company Logo"/>

                        </div>
                        <div class="col-xs-4" style="float: left;width: 30%; ">
                            <img t-if="doc.company_id.image_field_3"
                                 t-att-src="image_data_uri(doc.company_id.image_field_3)"
                                 style="max-height:50px;max-width:120%" alt="Company Logo"/>
                        </div>
                    </div>
                </div>
                <br>

                </br>
                <div style="margin-bottom: 20px;"></div>
                <br/>

                <div class="col-xs-12" style="font-size:12px;">
                    <u>
                        <h2>
                            <b>Terms and Conditions</b>
                        </h2>
                    </u>
                    <p t-field="doc.note"/>
                </div>
                <div class="col-xs-12" style="font-size:12px; ">
                    <u>
                        <h2>
                            <b>Remarks:</b>
                        </h2>
                    </u>
                    <h3>
                        <b>Certain Parts may not be available with the parent Company at the time of Order Placement</b>
                        <br/>
                        <b>Estimate may vary after dismantling vehicle thoroughly and supplementary Quotations may
                            issued may needed
                        </b>
                    </h3>
                </div>
                <div class="col-xs-12" align="right" style="font-size:12px;">
                    <br/>
                    <br/>
                    <b>_________________________</b>
                    <br/>
                    <h4>
                        <b>For :</b>
                        <span t-field="doc.company_id"/>
                    </h4>
                </div>
            </div>
        </t>
    </template>


    <template id="report_sale_quotation">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="ab_global_autopoint.report_quotation_document" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>
</odoo>

